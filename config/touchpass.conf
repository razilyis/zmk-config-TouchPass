# ===== Phase 5: TouchPass Module + NVS Storage + Serial RPC =====

# TouchPass Module
CONFIG_ZMK_TOUCHPASS=y
CONFIG_ZMK_TOUCHPASS_ALWAYS_ON=y
CONFIG_ZMK_TOUCHPASS_SERIAL_RPC=y

# USB HID Keyboard + BLE
CONFIG_ZMK_USB=y
CONFIG_ZMK_BLE=y
CONFIG_ZMK_KEYBOARD_NAME="TouchPass"

# Virtual kscan (no physical keys)
CONFIG_ZMK_KSCAN=y

# Clock and Power
CONFIG_CLOCK_CONTROL_NRF_K32SRC_RC=y
CONFIG_BOARD_ENABLE_DCDC=y

# USB CDC ACM (used by Serial RPC)
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_CDC_ACM=y
CONFIG_UART_LINE_CTRL=y
CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y

# USB Logging disabled (conflicts with Serial RPC on same CDC ACM)
# To re-enable for debugging: set SERIAL_RPC=n, USB_LOGGING=y
CONFIG_ZMK_USB_LOGGING=n

# Logging (internal buffer only — UART backend disabled to prevent
# mixing log output with RPC JSON on the same CDC ACM UART)
CONFIG_LOG=y
CONFIG_ZMK_LOG_LEVEL_INF=y
CONFIG_LOG_BUFFER_SIZE=2048
CONFIG_LOG_BACKEND_UART=n

# Console (required by ZMK internals, but output suppressed)
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=n

# Flash subsystem (required by NVS)
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y

# NVS — two independent instances:
#   storage_partition (0xec000): ZMK Settings / BLE pairing
#   touchpass_partition (0xe4000): finger data
CONFIG_SETTINGS=y
CONFIG_NVS=y
CONFIG_SETTINGS_NVS=y

# Reboot support (for RPC reboot command)
CONFIG_REBOOT=y
